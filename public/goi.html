<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>TopTop - Ch·ªçn G√≥i Ph√π H·ª£p</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(
          135deg,
          #3d3270 0%,
          #2a2255 50%,
          #1e1940 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        touch-action: manipulation;
      }

      .ad-container {
        width: 100%;
        max-width: 400px;
        height: 100vh;
        max-height: 750px;
        position: relative;
        overflow: hidden;
        background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
      }

      .scene {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
      }

      .scene.active {
        opacity: 1;
        pointer-events: auto;
      }

      .logo {
        position: absolute;
        top: 15px;
        left: 15px;
        height: 35px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .logo-icon {
        width: 35px;
        height: 35px;
        position: relative;
      }

      .logo-circle {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        background: linear-gradient(135deg, #7b6fa6 0%, #3d3270 100%);
        position: relative;
      }

      .logo-circle::before {
        content: "";
        position: absolute;
        width: 17px;
        height: 17px;
        background: #7b6fa6;
        border-radius: 50%;
        top: 4px;
        left: 10px;
      }

      .logo-pin {
        position: absolute;
        top: 7px;
        left: 50%;
        transform: translateX(-50%);
        width: 10px;
        height: 14px;
        background: #f5a623;
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      }

      .logo-pin::after {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 3px solid transparent;
        border-right: 3px solid transparent;
        border-top: 5px solid #f5a623;
      }

      .logo-text {
        font-size: 20px;
        font-weight: bold;
        color: #3d3270;
      }

      /* Scene 1 - Tutorial */
      #scene1 {
        background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
      }

      .tutorial-content {
        text-align: center;
        padding: 20px;
      }

      .tutorial-title {
        font-size: 24px;
        color: #3d3270;
        font-weight: bold;
        margin-bottom: 20px;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 0.8s ease forwards;
      }

      .tutorial-icon {
        font-size: 60px;
        margin-bottom: 20px;
        opacity: 0;
        animation: fadeInUp 0.8s ease 0.3s forwards;
      }

      .tutorial-text {
        font-size: 18px;
        color: #3d3270;
        line-height: 1.5;
        opacity: 0;
        animation: fadeInUp 0.8s ease 0.5s forwards;
      }

      .drag-hint {
        margin-top: 30px;
        opacity: 0;
        animation: fadeInUp 0.8s ease 0.7s forwards;
      }

      .drag-arrow {
        font-size: 40px;
        animation: dragHint 1.5s ease-in-out infinite;
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes dragHint {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .start-btn {
        margin-top: 30px;
        background: linear-gradient(135deg, #3d3270 0%, #2a2255 100%);
        color: #fff;
        border: none;
        padding: 15px 40px;
        font-size: 18px;
        font-weight: bold;
        border-radius: 25px;
        cursor: pointer;
        opacity: 0;
        animation: fadeInUp 0.8s ease 0.9s forwards;
      }

      /* Scene 2 - Main Gameplay */
      #scene2 {
        background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
        padding: 15px;
        padding-top: 60px;
      }

      .balance-section {
        text-align: center;
        margin-bottom: 15px;
      }

      .balance-label {
        font-size: 14px;
        color: #666;
        margin-bottom: 5px;
      }

      .balance-amount {
        font-size: 28px;
        font-weight: bold;
        color: #3d3270;
      }

      .remaining-label {
        font-size: 12px;
        color: #999;
        margin-top: 5px;
      }

      .remaining-amount {
        font-size: 18px;
        font-weight: bold;
        color: #f5a623;
      }

      .packages-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 15px;
      }

      .package-card {
        background: #fff;
        border-radius: 15px;
        padding: 12px 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .package-card.selected {
        border-color: #3d3270;
        box-shadow: 0 4px 20px rgba(61, 50, 112, 0.3);
      }

      .package-icon {
        width: 45px;
        height: 45px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
      }

      .package-flexible .package-icon {
        background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
      }

      .package-3month .package-icon {
        background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
      }

      .package-6month .package-icon {
        background: linear-gradient(135deg, #f5a623 0%, #d48c1a 100%);
      }

      .package-info {
        flex: 1;
      }

      .package-name {
        font-size: 14px;
        font-weight: bold;
        color: #3d3270;
        margin-bottom: 3px;
      }

      .package-rate {
        font-size: 12px;
        color: #666;
      }

      .package-rate span {
        color: #f5a623;
        font-weight: bold;
      }

      .package-allocation {
        text-align: right;
      }

      .allocation-amount {
        font-size: 14px;
        font-weight: bold;
        color: #3d3270;
      }

      .allocation-slider {
        width: 80px;
        height: 6px;
        -webkit-appearance: none;
        background: #e0e0e0;
        border-radius: 3px;
        outline: none;
        margin-top: 5px;
      }

      .allocation-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: #3d3270;
        border-radius: 50%;
        cursor: pointer;
      }

      .allocation-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: #3d3270;
        border-radius: 50%;
        cursor: pointer;
        border: none;
      }

      .result-section {
        background: #fff;
        border-radius: 15px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 15px;
      }

      .result-title {
        font-size: 14px;
        color: #666;
        margin-bottom: 8px;
      }

      .result-amount {
        font-size: 32px;
        font-weight: bold;
        color: #3d3270;
      }

      .result-interest {
        font-size: 16px;
        color: #4caf50;
        font-weight: bold;
        margin-top: 5px;
      }

      .money-flow {
        position: absolute;
        pointer-events: none;
        font-size: 16px;
        animation: flowMoney 1s ease-out forwards;
      }

      @keyframes flowMoney {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-50px) scale(0.5);
        }
      }

      .cta-btn {
        background: linear-gradient(135deg, #3d3270 0%, #2a2255 100%);
        color: #fff;
        border: none;
        padding: 15px 30px;
        font-size: 16px;
        font-weight: bold;
        border-radius: 25px;
        cursor: pointer;
        width: 100%;
        animation: ctaPulse 2s ease-in-out infinite;
      }

      @keyframes ctaPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 4px 15px rgba(61, 50, 112, 0.3);
        }
        50% {
          transform: scale(1.02);
          box-shadow: 0 6px 25px rgba(61, 50, 112, 0.5);
        }
      }

      /* Scene 3 - CTA */
      #scene3 {
        background: linear-gradient(180deg, #f5f5f5 0%, #e8e8e8 100%);
      }

      .cta-container {
        text-align: center;
        padding: 20px;
      }

      .cta-logo {
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .cta-logo-icon {
        width: 50px;
        height: 50px;
        position: relative;
      }

      .cta-logo-circle {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: linear-gradient(135deg, #7b6fa6 0%, #3d3270 100%);
        position: relative;
      }

      .cta-logo-circle::before {
        content: "";
        position: absolute;
        width: 25px;
        height: 25px;
        background: #7b6fa6;
        border-radius: 50%;
        top: 6px;
        left: 15px;
      }

      .cta-logo-pin {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 15px;
        height: 20px;
        background: #f5a623;
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      }

      .cta-logo-pin::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 7px solid #f5a623;
      }

      .cta-logo-text {
        font-size: 32px;
        font-weight: bold;
        color: #3d3270;
      }

      .final-result {
        background: #fff;
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .final-label {
        font-size: 14px;
        color: #666;
        margin-bottom: 10px;
      }

      .final-amount {
        font-size: 36px;
        font-weight: bold;
        color: #3d3270;
      }

      .final-interest {
        font-size: 20px;
        color: #4caf50;
        font-weight: bold;
        margin-top: 8px;
      }

      .tagline {
        font-size: 18px;
        color: #3d3270;
        margin-bottom: 25px;
        font-style: italic;
      }

      .final-cta-btn {
        background: linear-gradient(135deg, #3d3270 0%, #2a2255 100%);
        color: #fff;
        border: none;
        padding: 18px 40px;
        font-size: 18px;
        font-weight: bold;
        border-radius: 30px;
        cursor: pointer;
        animation: ctaPulse 1.5s ease-in-out infinite;
        margin-bottom: 20px;
      }

      .store-badges {
        display: flex;
        justify-content: center;
        gap: 12px;
      }

      .store-badge {
        background: #000;
        color: #fff;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 11px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .store-icon {
        font-size: 18px;
      }

      .store-text {
        text-align: left;
      }

      .store-small {
        font-size: 7px;
        opacity: 0.7;
      }

      .store-name {
        font-weight: bold;
        font-size: 10px;
      }

      .progress-container {
        position: absolute;
        bottom: 10px;
        left: 20px;
        right: 20px;
        height: 4px;
        background: rgba(61, 50, 112, 0.2);
        border-radius: 2px;
      }

      .progress-bar {
        height: 100%;
        background: #3d3270;
        border-radius: 2px;
        transition: width 0.3s ease;
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        animation: confettiFall 3s ease-out forwards;
      }

      @keyframes confettiFall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="ad-container" id="adContainer">
      <!-- Scene 1 - Tutorial -->
      <div class="scene active" id="scene1">
        <div class="logo">
          <div class="logo-icon">
            <div class="logo-circle">
              <div class="logo-pin"></div>
            </div>
          </div>
          <span class="logo-text">TOPTOP</span>
        </div>
        <div class="tutorial-content">
          <div class="tutorial-title">Ch·ªçn G√≥i Ph√π H·ª£p</div>
          <div class="tutorial-icon">üìä</div>
          <div class="tutorial-text">
            ƒêi·ªÅu ch·ªânh thanh tr∆∞·ª£t ƒë·ªÉ<br />
            x√¢y d·ª±ng k·∫ø ho·∫°ch t√†i ch√≠nh c·ªßa b·∫°n
          </div>
          <div class="drag-hint">
            <div class="drag-arrow">‚ÜïÔ∏è</div>
          </div>
          <button class="start-btn" onclick="startGame()">B·∫Øt ƒë·∫ßu</button>
        </div>
      </div>

      <!-- Scene 2 - Main Gameplay -->
      <div class="scene" id="scene2">
        <div class="logo">
          <div class="logo-icon">
            <div class="logo-circle">
              <div class="logo-pin"></div>
            </div>
          </div>
          <span class="logo-text">TOPTOP</span>
        </div>

        <div class="balance-section">
          <div class="balance-label">S·ªë ti·ªÅn nh√†n r·ªói</div>
          <div class="balance-amount">50,000,000ƒë</div>
          <div class="remaining-label">C√≤n l·∫°i ch∆∞a ph√¢n b·ªï</div>
          <div class="remaining-amount" id="remainingAmount">50,000,000ƒë</div>
        </div>

        <div class="packages-container">
          <div class="package-card package-flexible" id="package1">
            <div class="package-icon">üè¶</div>
            <div class="package-info">
              <div class="package-name">G√≥i Linh ho·∫°t</div>
              <div class="package-rate">
                Kh√¥ng k·ª≥ h·∫°n - <span>5.5%</span>/nƒÉm
              </div>
            </div>
            <div class="package-allocation">
              <div class="allocation-amount" id="amount1">0ƒë</div>
              <input
                type="range"
                class="allocation-slider"
                id="slider1"
                min="0"
                max="50000000"
                step="1000000"
                value="0"
                oninput="updateAllocation()"
              />
            </div>
          </div>

          <div class="package-card package-3month" id="package2">
            <div class="package-icon">üìÖ</div>
            <div class="package-info">
              <div class="package-name">G√≥i 3 th√°ng</div>
              <div class="package-rate">
                K·ª≥ h·∫°n 3 th√°ng - <span>6.5%</span>/nƒÉm
              </div>
            </div>
            <div class="package-allocation">
              <div class="allocation-amount" id="amount2">0ƒë</div>
              <input
                type="range"
                class="allocation-slider"
                id="slider2"
                min="0"
                max="50000000"
                step="1000000"
                value="0"
                oninput="updateAllocation()"
              />
            </div>
          </div>

          <div class="package-card package-6month" id="package3">
            <div class="package-icon">üéØ</div>
            <div class="package-info">
              <div class="package-name">G√≥i 6 th√°ng</div>
              <div class="package-rate">
                K·ª≥ h·∫°n 6 th√°ng - <span>7.5%</span>/nƒÉm
              </div>
            </div>
            <div class="package-allocation">
              <div class="allocation-amount" id="amount3">0ƒë</div>
              <input
                type="range"
                class="allocation-slider"
                id="slider3"
                min="0"
                max="50000000"
                step="1000000"
                value="0"
                oninput="updateAllocation()"
              />
            </div>
          </div>
        </div>

        <div class="result-section">
          <div class="result-title">T·ªïng l√£i d·ª± ki·∫øn sau 1 nƒÉm</div>
          <div class="result-amount" id="totalResult">50,000,000ƒë</div>
          <div class="result-interest" id="totalInterest">+0ƒë l√£i</div>
        </div>

        <button class="cta-btn" onclick="showFinalCTA()">
          X√°c nh·∫≠n k·∫ø ho·∫°ch
        </button>
      </div>

      <!-- Scene 3 - CTA -->
      <div class="scene" id="scene3">
        <div class="logo">
          <div class="logo-icon">
            <div class="logo-circle">
              <div class="logo-pin"></div>
            </div>
          </div>
          <span class="logo-text">TOPTOP</span>
        </div>
        <div class="cta-container">
          <div class="cta-logo">
            <div class="cta-logo-icon">
              <div class="cta-logo-circle">
                <div class="cta-logo-pin"></div>
              </div>
            </div>
            <span class="cta-logo-text">TOPTOP</span>
          </div>

          <div class="final-result">
            <div class="final-label">K·∫ø ho·∫°ch c·ªßa b·∫°n sau 1 nƒÉm</div>
            <div class="final-amount" id="finalAmount">50,000,000ƒë</div>
            <div class="final-interest" id="finalInterest">+0ƒë l√£i</div>
          </div>

          <div class="tagline">"Linh ho·∫°t theo c√°ch c·ªßa b·∫°n"</div>

          <button class="final-cta-btn" onclick="handleCTA()">
            B·∫Øt ƒë·∫ßu k·∫ø ho·∫°ch c·ªßa b·∫°n<br />
            <small>T·∫£i TopTop</small>
          </button>

          <div class="store-badges">
            <div class="store-badge">
              <span class="store-icon">üçé</span>
              <div class="store-text">
                <div class="store-small">T·∫£i v·ªÅ tr√™n</div>
                <div class="store-name">App Store</div>
              </div>
            </div>
            <div class="store-badge">
              <span class="store-icon">‚ñ∂Ô∏è</span>
              <div class="store-text">
                <div class="store-small">T·∫¢I TR√äN</div>
                <div class="store-name">Google Play</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="progress-container">
        <div class="progress-bar" id="progressBar" style="width: 33%"></div>
      </div>
    </div>

    <script>
      const totalBalance = 50000000;
      const rates = {
        package1: 0.055,
        package2: 0.065,
        package3: 0.075,
      };

      let allocations = {
        package1: 0,
        package2: 0,
        package3: 0,
      };

      function formatCurrency(amount) {
        return Math.round(amount).toLocaleString("vi-VN") + "ƒë";
      }

      function switchScene(sceneNum) {
        document.querySelectorAll(".scene").forEach((scene) => {
          scene.classList.remove("active");
        });
        document.getElementById(`scene${sceneNum}`).classList.add("active");

        const progress = (sceneNum / 3) * 100;
        document.getElementById("progressBar").style.width = `${progress}%`;
      }

      function startGame() {
        switchScene(2);
      }

      function updateAllocation() {
        const slider1 = parseInt(document.getElementById("slider1").value);
        const slider2 = parseInt(document.getElementById("slider2").value);
        const slider3 = parseInt(document.getElementById("slider3").value);

        const total = slider1 + slider2 + slider3;

        if (total > totalBalance) {
          const excess = total - totalBalance;
          const lastChanged = event.target.id;

          if (lastChanged === "slider1") {
            document.getElementById("slider1").value = slider1 - excess;
          } else if (lastChanged === "slider2") {
            document.getElementById("slider2").value = slider2 - excess;
          } else {
            document.getElementById("slider3").value = slider3 - excess;
          }
        }

        allocations.package1 = parseInt(
          document.getElementById("slider1").value
        );
        allocations.package2 = parseInt(
          document.getElementById("slider2").value
        );
        allocations.package3 = parseInt(
          document.getElementById("slider3").value
        );

        document.getElementById("amount1").textContent = formatCurrency(
          allocations.package1
        );
        document.getElementById("amount2").textContent = formatCurrency(
          allocations.package2
        );
        document.getElementById("amount3").textContent = formatCurrency(
          allocations.package3
        );

        const totalAllocated =
          allocations.package1 + allocations.package2 + allocations.package3;
        const remaining = totalBalance - totalAllocated;
        document.getElementById("remainingAmount").textContent =
          formatCurrency(remaining);

        const interest1 = allocations.package1 * rates.package1;
        const interest2 = allocations.package2 * rates.package2;
        const interest3 = allocations.package3 * rates.package3;
        const totalInterest = interest1 + interest2 + interest3;
        const totalResult = totalAllocated + totalInterest;

        document.getElementById("totalResult").textContent =
          formatCurrency(totalResult);
        document.getElementById("totalInterest").textContent =
          "+" + formatCurrency(totalInterest) + " l√£i";

        // Update card selection state
        document
          .getElementById("package1")
          .classList.toggle("selected", allocations.package1 > 0);
        document
          .getElementById("package2")
          .classList.toggle("selected", allocations.package2 > 0);
        document
          .getElementById("package3")
          .classList.toggle("selected", allocations.package3 > 0);

        // Create money flow animation
        if (totalAllocated > 0) {
          createMoneyFlow();
        }
      }

      function createMoneyFlow() {
        const container = document.getElementById("scene2");
        const flow = document.createElement("div");
        flow.className = "money-flow";
        flow.innerHTML = "üí∞";
        flow.style.left = 100 + Math.random() * 200 + "px";
        flow.style.top = "150px";
        container.appendChild(flow);

        setTimeout(() => flow.remove(), 1000);
      }

      function createConfetti() {
        const container = document.getElementById("scene3");
        const colors = ["#3D3270", "#F5A623", "#7B6FA6", "#4CAF50", "#2196F3"];

        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random() * 100 + "%";
            confetti.style.background =
              colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDelay = Math.random() * 0.5 + "s";
            container.appendChild(confetti);

            setTimeout(() => confetti.remove(), 3000);
          }, i * 50);
        }
      }

      function showFinalCTA() {
        const totalAllocated =
          allocations.package1 + allocations.package2 + allocations.package3;

        if (totalAllocated === 0) {
          alert("Vui l√≤ng ph√¢n b·ªï ti·ªÅn v√†o √≠t nh·∫•t m·ªôt g√≥i!");
          return;
        }

        const interest1 = allocations.package1 * rates.package1;
        const interest2 = allocations.package2 * rates.package2;
        const interest3 = allocations.package3 * rates.package3;
        const totalInterest = interest1 + interest2 + interest3;
        const totalResult = totalAllocated + totalInterest;

        document.getElementById("finalAmount").textContent =
          formatCurrency(totalResult);
        document.getElementById("finalInterest").textContent =
          "+" + formatCurrency(totalInterest) + " l√£i";

        switchScene(3);
        createConfetti();
      }

      function handleCTA() {
        alert("Chuy·ªÉn ƒë·∫øn App Store / Google Play ƒë·ªÉ t·∫£i TopTop!");
      }

      // Initialize
      updateAllocation();
    </script>
  </body>
</html>
